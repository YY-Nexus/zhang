# ðŸš€ ç«‹å³éƒ¨ç½²æ­¥éª¤ï¼ˆæœ€ç®€å•æ–¹å¼ï¼‰

**æœåŠ¡å™¨ä¿¡æ¯ï¼š**
- IP: 47.94.135.202
- ç”¨æˆ·: root
- å¯†ç : My151001
- åŸŸå: zhang.0379.loveï¼ˆå·²è§£æžï¼‰

---

## âš¡ å¿«é€Ÿéƒ¨ç½²ï¼ˆ3æ­¥å®Œæˆï¼‰

### æ­¥éª¤1ï¼šä¸Šä¼ é¡¹ç›®æ–‡ä»¶

åœ¨æœ¬åœ°æ‰§è¡Œï¼š
```bash
cd /Users/yanyu/Documents/zhang

# ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
rsync -avz --progress \
    --exclude 'node_modules' \
    --exclude '.next' \
    --exclude '.git' \
    --exclude '.DS_Store' \
    --exclude '*.log' \
    ./ root@47.94.135.202:/opt/wedding-site/
```

è¾“å…¥å¯†ç ï¼š`My151001`

---

### æ­¥éª¤2ï¼šè¿žæŽ¥æœåŠ¡å™¨å¹¶æ‰§è¡Œéƒ¨ç½²è„šæœ¬

```bash
# è¿žæŽ¥æœåŠ¡å™¨
ssh root@47.94.135.202
# å¯†ç ï¼šMy151001
```

åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/wedding-site

# æ‰§è¡Œéƒ¨ç½²è„šæœ¬
bash scripts/server-setup.sh
```

---

### æ­¥éª¤3ï¼šå®Œæˆï¼

éƒ¨ç½²å®ŒæˆåŽï¼Œè®¿é—®ï¼š
- **https://zhang.0379.love**

---

## ðŸ“‹ å¦‚æžœè„šæœ¬æ‰§è¡Œå¤±è´¥ï¼Œæ‰‹åŠ¨æ‰§è¡Œï¼š

### 1. å®‰è£…çŽ¯å¢ƒ
```bash
# å®‰è£…Node.js 18
curl -fsSL https://rpm.nodesource.com/setup_18.x | bash -
yum install -y nodejs

# å®‰è£…pnpm
npm install -g pnpm

# å®‰è£…PM2
npm install -g pm2

# å®‰è£…Nginx
yum install -y nginx

# å®‰è£…Certbot
yum install -y certbot python3-certbot-nginx
```

### 2. æž„å»ºé¡¹ç›®
```bash
cd /opt/wedding-site
pnpm install --frozen-lockfile
pnpm build
```

### 3. å¯åŠ¨åº”ç”¨
```bash
pm2 start npm --name "wedding-site" -- start
pm2 save
pm2 startup
```

### 4. é…ç½®Nginx
```bash
cat > /etc/nginx/conf.d/wedding-site.conf << 'EOF'
server {
    listen 80;
    server_name zhang.0379.love;
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name zhang.0379.love;

    ssl_certificate /etc/letsencrypt/live/zhang.0379.love/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/zhang.0379.love/privkey.pem;

    location / {
        proxy_pass http://127.0.0.1:3666;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF

nginx -t
systemctl enable nginx
systemctl start nginx
```

### 5. é…ç½®SSLè¯ä¹¦
```bash
certbot --nginx -d zhang.0379.love --non-interactive --agree-tos \
    --email admin@0379.email --redirect
```

### 6. é…ç½®é˜²ç«å¢™
```bash
firewall-cmd --permanent --add-service=http
firewall-cmd --permanent --add-service=https
firewall-cmd --reload
```

---

## âœ… éƒ¨ç½²åŽéªŒè¯

1. è®¿é—®ï¼šhttps://zhang.0379.love
2. æ£€æŸ¥SSLè¯ä¹¦ï¼ˆæµè§ˆå™¨æ˜¾ç¤ºðŸ”’ï¼‰
3. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½ï¼š
   - ç…§ç‰‡æ˜¾ç¤º
   - è§†é¢‘æ’­æ”¾
   - éŸ³ä¹æ’­æ”¾
   - ç§»åŠ¨ç«¯å“åº”å¼

---

## ðŸ”§ å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
pm2 status
pm2 logs wedding-site

# é‡å¯åº”ç”¨
pm2 restart wedding-site

# æŸ¥çœ‹NginxçŠ¶æ€
systemctl status nginx

# é‡å¯Nginx
systemctl restart nginx
```

---

**çŽ°åœ¨å°±å¯ä»¥å¼€å§‹éƒ¨ç½²äº†ï¼** ðŸŽŠ

